!function($,e,t){"use strict";$(document).ready(function(){$(".typolab-fonts-list .font-preview-iframe").each(function(e,t){var a=$(t);a.find("iframe").on("load",function(){var e=$(this.contentWindow.document),t=e.find(".single-entry"),n=t.outerHeight();a.css({lineHeight:n+"px",height:n}),t.find("p").width(a.width()),a.addClass("loaded")})}),$(".fonts-list-select").each(function(e,t){var n=$(t),o=n.find(".alphabet a"),i=n.find(".search-bar input"),s=n.find(".search-bar select"),r=n.find(".font-list"),l=n.find(".font-list-data"),c=$('<div class="no-records">Nothing found!</div>'),u='<span class="checked"><i class="fa fa-check"></i></span>',v=n.data("font-source"),m=o.filter(".current").data("letter"),h=n.data("currentFont"),g=n.data("currentFontVariants"),y=n.data("currentFontSubsets"),b=function(e){o.removeClass("current"),o.filter('[data-letter="'+e+'"]').addClass("current"),i.val("");var t=!(!s.length||!s.val().length);_.removeClass("search-match search-unmatch letter-unmatch").filter(".active").removeClass("active"),_.filter(function(a,n){var o=$(n);return e==$(n).data("letter")?o.addClass("active"):t&&o.addClass("letter-unmatch"),n}),r.scrollTop(0),m=e},w=function(e){o.addClass("letter-unmatch").each(function(t,a){e[a.textContent]&&$(a).removeClass("letter-unmatch").addClass("letter-match")})},k=function(e,t){var n=$('<a href="#"></a>');if("google-fonts"==v){var o=e.family,i=o.substring(0,1).toUpperCase();n.html(u+o).data({letter:i,category:e.category}).on("click",function(t,a,o){t.preventDefault(),r.find("a").removeClass("current"),n.addClass("current"),p(e,a,o)}),m==i&&n.addClass("active"),t&&setTimeout(function(){a=!1,n.trigger("click",[g,y])},1),n.appendTo(r)}else if("font-squirrel"==v){var o=e.family_name,i=o.substring(0,1).toUpperCase();n.html(u+o).data({letter:i,category:e.classification}).on("click",function(t,a,o){t.preventDefault(),r.find("a").removeClass("current"),n.addClass("current"),d(e,a,o)}),m==i&&n.addClass("active"),t&&setTimeout(function(){a=!1,n.trigger("click",[g,y])},1),n.appendTo(r)}else if("premium-fonts"==v){var o=e.family,i=o.substring(0,1).toUpperCase();n.html(u+o).data({letter:i,category:e.category}).on("click",function(t,a,o){t.preventDefault(),r.find("a").removeClass("current"),n.addClass("current"),f(e,a,o)}),m==i&&n.addClass("active"),t&&setTimeout(function(){a=!1,n.trigger("click",[g,y])},1),n.appendTo(r)}},C=JSON.parse(l.html());$.each(C,function(e,t){var a=t.family?t.family:t.family_name;k(t,h==a)}),n.find(".loading-fonts").remove(),o.on("click",function(e){e.preventDefault(),b($(this).data("letter"))}),r.append(c);var _=r.find("a");i.on("keyup",function(e){var t=$(this).val(),a=0;if(0==t.length)return _.removeClass("search-match search-unmatch"),void c.removeClass("active");_.each(function(e,n){var o=$(n),i=o.text();i.match(new RegExp("^"+Z(t),"i"))||i.match(new RegExp(" "+Z(t),"i"))||i.match(new RegExp(Z(t)+"$","i"))?(o.addClass("search-match").removeClass("search-unmatch"),a++):o.removeClass("search-match").addClass("search-unmatch")}),c[a>0?"removeClass":"addClass"]("active")}).on("blur",function(){0==$(this).val().length&&_.removeClass("search-match search-unmatch")}),s.on("change",function(){var e=s.val();if(o.removeClass("letter-match letter-unmatch current"),_.removeClass("category-match category-unmatch letter-unmatch active"),e){var t={};_.filter(function(a,n){var o=$(n);if(e==o.data("category")){var i=o.text().substring(0,1).toUpperCase();t[i]?t[i].count++:t[i]={letter:i,count:1},o.addClass("category-match")}else o.addClass("category-unmatch")}),w(t)}else m&&b(m)})}),$("#typolab-wrapper .tooltip").each(function(e,t){$(t).tooltipster({theme:"tooltipster-borderless"})});var t="",a=!0,n=0,o=$(".font-preview-container"),i=$('#edit-font-form input[name="font_family"]'),s=$('#edit-font-form textarea[name="font_data"]'),r=function(e,t,a,n){var i=$('<div class="font-preview-row"></div>'),s=$('<div class="font-preview-row-bg"></div>');o.append(i.clone().attr("id",e).addClass(n||"").append('<span class="row-title">'+t+"</span>").append(a).wrapInner(s))},l=function(e){switch(e){case"display":return"Display";break;case"handwriting":return"Handwriting";break;case"monospace":return"Monospace";break;case"sans-serif":return"Sans Serif";break;case"serif":return"Serif";break}return e},c=function(e){switch(e){case"latin":return"Latin";break;case"latin-ext":return"Latin Extended";break;case"cyrillic":return"Cyrillic";break;case"greek":return"Greek";break;case"vietnamese":return"Vietnamese";break;case"cyrillic-ext":return"Cyrillic Extended";break;case"greek-ext":return"Greek Extended";break}return e},p=function(p,d,f){if(t==p.family)return!1;t=p.family,e.clearInterval(n),o.html(""),r("font-family-name","Font Family:",'<p class="font-family-name">'+p.family+"</p>");var u=$("<iframe></iframe>"),v=$('<p class="description">Loading font preview...</p>'),m=ajaxurl+"?action=typolab-preview-google-fonts&font-family="+encodeURIComponent(p.family);return u.attr({src:m}).on("load",function(){var e=$(this.contentWindow.document);v.remove(),u.height(e.height()),n=setInterval(function(){u.height(e.height())},50),a&&$("html, body").animate({scrollTop:o.offset().top-50}),a=!0,u.after('<p class="font-details-link"><a href="https://fonts.google.com/specimen/'+encodeURIComponent(p.family)+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+l(p.category)+"</p>"),i.val(p.family),s.val(JSON.stringify(p));var t=$('<div class="checkboxes-container"></div>'),m=d?d.split(","):["regular"];for(var g in p.variants){var y=p.variants[g],b=$("<label></label>"),w=$('<input type="checkbox" name="font_variants[]" value="'+y+'" '+(-1!=$.inArray(y,m)?"checked":"")+">");w.on("change",h),b.append(w),b.append("<span>"+(y.indexOf("italic")>0?y.replace("italic",", italic"):y)+"</span>").appendTo(t)}r("font-preview-variants","Font Variants",t,"half");var k=$('<div class="checkboxes-container"></div>'),C=f?f.split(","):["latin"];for(var g in p.subsets){var _=p.subsets[g],x=$("<label></label>");x.append('<input type="checkbox" name="font_subsets[]" value="'+_+'" '+(-1!=$.inArray(_,C)?"checked":"")+">"),x.append("<span>"+c(_)+"</span>").appendTo(k)}r("font-preview-subsets","Font Subsets",k,"half");var S=Math.max(t.outerHeight(),k.outerHeight());t.add(k).css({minHeight:S}),$(".fonts-list-select .font-list").css({maxHeight:Math.max($(".font-preview-container").outerHeight()-95,450)}),h()}),r("font-preview-iframe","Live Preview",[v,u]),!0},d=function(l,c,p){var d=JSON.parse($(".font-squirrel-data").html()),f=d.downloadedFonts[l.family_urlname];return t!=l.family_name&&(t=l.family_name,e.clearInterval(n),o.html(""),r("font-family-name","Font Family:",'<p class="font-family-name">'+l.family_name+"</p>"),i.val(l.family_name),$.getJSON("https://www.fontsquirrel.com/api/familyinfo/"+l.family_urlname,function(e){var t=$('<div class="checkboxes-container"></div>'),i=c?c.split(","):[],p=["Regular"];if($.each(e,function(e,a){var n=a.style_name,o=$('<input type="checkbox" name="font_variants[]" value="'+a.fontface_name+'" '+(-1!=$.inArray(a.fontface_name,i)?"checked":"")+">"),s=$("<label></label>");i.length||-1==$.inArray(a.style_name,p)||o.prop("checked",!0),o.on("change",h),s.append(o),s.append('<span title="'+a.fontface_name+'">'+a.style_name+"</span>").appendTo(t)}),s.val(JSON.stringify(e)),f){var d=$("<iframe></iframe>"),v=$('<p class="description">Loading font preview...</p>'),g=ajaxurl+"?action=typolab-preview-font-squirrel&font-family="+encodeURIComponent(l.family_urlname);return d.attr({src:g}).on("load",function(){var e=$(this.contentWindow.document);v.remove(),d.height(e.height()),n=setInterval(function(){d.height(e.height())},100),a&&$("html, body").animate({scrollTop:o.offset().top-50}),a=!0;var i=$('<a href="#" class="font-redownload" title="Re-download font"><i class="fa fa-refresh"></i></a>');d.after('<p class="font-details-link"><a href="https://www.fontsquirrel.com/fonts/'+encodeURIComponent(l.family_urlname)+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+l.classification+"</p>"),d.next().append(i),i.on("click",function(e){if(e.preventDefault(),i.hasClass("is-downloaded"))return!1;confirm("Confirm font re-download?")&&(i.addClass("fa-spin").attr("title","Downloading font..."),m("font-squirrel",l.family_urlname,function(e){if(i.removeClass("fa-spin"),e.errors){var t="";for(var a in e.error_msg)t+="\n"+e.error_msg[a];alert(t.trim())}else i.addClass("is-downloaded").html('<i class="fa fa-check"></i>').attr("title","Font has been downloaded successfully!")}))}),r("font-preview-variants","Font Variants",t),h()}),r("font-preview-iframe","Live Preview",[v,d]),D(),!0}var y=$('<div class="external-font-previews"></div>'),b=$('<p class="description">Loading font preview...</p>');r("font-preview-iframe","Preview",[b,y]),a&&$("html, body").animate({scrollTop:o.offset().top-50}),a=!0;var w=u(e);b.remove(),y.append(w),y.after('<p class="font-details-link"><a href="https://www.fontsquirrel.com/fonts/'+encodeURIComponent(l.family_urlname)+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+l.classification+"</p>"),r("font-preview-variants","Font Variants",t),h();var k="<p>You need to download and install this font in order to use it in this site.<br>";k+="Installation process is automatic, simply click the button below:</p>";var C=$('<a href="#install-font-package" class="button-primary download-font">Download &amp; Install Font</a>');r("font-squirrel-downloader","Install Font",[k,$('<p class="hover">').append(C)],"font-downloader"),C.on("click",function(e){if(e.preventDefault(),C.hasClass("disabled"))return!1;C.addClass("disabled").html("Installing font..."),m("font-squirrel",l.family_urlname,function(e){var t=$("#font-squirrel-downloader .font-preview-row-bg");if(C.removeClass("disabled").html("Download &amp; Install Font"),t.find(".notice-error").remove(),e.errors){t.append('<div class="notice notice-error"></div>');for(var a in e.error_msg)t.find(".notice-error").append("<p>"+e.error_msg[a]+"</p>")}else t.find("p, .download-font").remove(),t.append('<p class="font-installed"><i class="fa fa-check"></i> Font has been installed successfully. Review font settings and click <strong>Save Changes</strong> button.</p>')})}),z("Font is not installed")}),!0)},f=function(e,l,c){var p=JSON.parse($(".premium-font-data").html()),d=p.downloadedFonts[e.family_urlname];if(t==e.family)return!1;var f=$('<div class="checkboxes-container"></div>'),u=l?l.split(","):[],g=["FunctionProBold","FunctionProBook","FunctionProDemi","FunctionProExtraBold","FunctionProLight","FunctionProMedium"];$.each(e.variants,function(e,t){var a=$('<input type="checkbox" name="font_variants[]" value="'+e+'" '+(-1!=$.inArray(e,u)?"checked":"")+">"),n=$("<label></label>");u.length||-1==$.inArray(t.name,g)||a.prop("checked",!0),a.on("change",h),n.append(a),n.append('<span title="'+e+'">'+t.name+"</span>").appendTo(f)});var y=$('<div class="checkboxes-container"></div>'),b=c?c.split(","):["macroman"];if($.each(e.subsets,function(e,t){var a=$("<label></label>");a.append('<input type="checkbox" name="font_subsets[]" value="'+e+'" '+(-1!=$.inArray(e,b)?"checked":"")+">"),a.append("<span>"+t+"</span>").appendTo(y)}),o.html(""),i.val(e.family),s.val(JSON.stringify(e)),r("font-family-name","Font Family:",'<p class="font-family-name">'+e.family+"</p>"),d){var w=$("<iframe></iframe>"),k=$('<p class="description">Loading font preview...</p>'),C=ajaxurl+"?action=typolab-preview-premium-fonts&font-family="+encodeURIComponent(e.family_urlname);return w.attr({src:C}).on("load",function(){var t=$(this.contentWindow.document);k.remove(),w.height(t.height()),n=setInterval(function(){w.height(t.height())},100),a&&$("html, body").animate({scrollTop:o.offset().top-50}),a=!0;var i=$('<a href="#" class="font-redownload" title="Re-download font"><i class="fa fa-refresh"></i></a>');w.after('<p class="font-details-link"><a href="'+e.creator+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+e.category+(d?"":' <span class="sep"></span> Size: '+e.size)+"</p>"),p.isActivated&&p.licenseKey&&(w.next().append(i),i.on("click",function(t){if(t.preventDefault(),i.hasClass("is-downloaded"))return!1;confirm("Confirm font re-download?")&&(i.addClass("fa-spin").attr("title","Downloading font..."),m("premium-fonts",e.family,function(e){if(i.removeClass("fa-spin"),e.errors){var t="";for(var a in e.error_msg)t+="\n"+e.error_msg[a];alert(t.trim())}else i.addClass("is-downloaded").html('<i class="fa fa-check"></i>').attr("title","Font has been downloaded successfully!")}))})),r("font-preview-variants","Font Variants",f,"two-thirds"),r("font-preview-subsets","Font Subsets",y,"one-third"),h()}),r("font-preview-iframe","Live Preview",[k,w]),D(),!0}var _=$('<div class="external-font-previews"></div>'),x=$('<p class="description">Loading font preview...</p>');r("font-preview-iframe","Preview",[x,_]);var S=v(e.variants);x.remove(),_.append(S),_.after('<p class="font-details-link"><a href="'+e.creator+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+e.category+(d?"":' <span class="sep"></span> Size: '+e.size)+"</p>"),r("font-preview-variants","Font Variants",f,"two-thirds"),r("font-preview-subsets","Font Subsets",y,"one-third"),h();var F="<p>You need to download and install this font in order to use it in this site.<br>";F+="Installation process is automatic, simply click the button below:</p>";var T=$('<a href="#install-font-package" class="button-primary download-font">Download &amp; Install Font</a>'),I="";p.isActivated&&p.licenseKey?T.on("click",function(t){if(t.preventDefault(),T.hasClass("disabled"))return!1;T.addClass("disabled").html("Installing font..."),m("premium-fonts",e.family,function(e){var t=$("#premium-font-downloader .font-preview-row-bg");if(T.removeClass("disabled").html("Download &amp; Install Font"),t.find(".notice-error").remove(),e.errors){t.append('<div class="notice notice-error"></div>');for(var a in e.error_msg)t.find(".notice-error").append("<p>"+e.error_msg[a]+"</p>")}else t.find("p, .download-font").remove(),t.append('<p class="font-installed"><i class="fa fa-check"></i> Font has been installed successfully. Review font settings and click  <strong>Save Changes</strong> button.</p>')})}):(T.addClass("disabled").on("click",function(e){return!1}),I='<div class="notice notice-warning"><p>To download this font you must <a href="admin.php?page=kalium-product-registration">activate the theme</a>.</p></div>'),r("premium-font-downloader","Install Font",[F,$('<p class="hover">').append(T),I],"font-downloader"),z("Font is not installed")},u=function(e){var t=$("<div></div>");return $.each(e,function(e,a){var n=$('<div class="preview-entry"></div>');n.append('<img src="'+a.listing_image+'">'),n.append("<span>"+a.style_name+"</span>"),t.append(n)}),t.children()},v=function(e){var t=$("<div></div>");return $.each(e,function(e,a){var n=$('<div class="preview-entry"></div>');a.screenshot&&(n.append('<img src="https://api.laborator.co/assets/img/font-previews/'+a.screenshot+'">'),n.append("<span>"+a.name+"</span>"),t.append(n))}),t.children()},m=function(e,t,a){var n,o=$(".fonts-list-select .font-list");switch(o.addClass("download-in-progress"),e){case"font-squirrel":n="typolab_font_squirrel_download";break;case"premium-fonts":n="typolab_premium_fonts_download";break}return!!n&&($.post(ajaxurl,{action:n,font_family:t},function(e){o.removeClass("download-in-progress"),"function"==typeof a&&a.apply(this,[e]),D()},"json"),!0)},h=function(){var e=$('#font-preview-variants input[type="checkbox"]:checked'),t=$(".font-selectors-list .font-variants select"),a=$(".custom-font-form-layout");if(a.length){var n=[];a.find('#font-family-names input[name="font_variants[]"]').each(function(t,a){var o=$(a).val();o=o.replace(/(font-family:|\'|\")/gi,"").trim(),$.each(o.split(";"),function(e,t){t=t.split(",")[0],t.trim().length&&n.push($("<input>").attr({value:t.split(",")[0]}))}),e=$(n)})}t.each(function(t,a){var n=$(a),o=n.data("selected"),i=e.length>0;n.find("option").remove(),n.prop("disabled",0==i)[i?"removeClass":"addClass"]("disabled"),i||n.append("<option>- No font variants -</option>"),e.each(function(e,t){var a=$(t),i=a.val(),s=$("<option>"+i+"</option>").val(i);n.append(s),i==o&&s.prop("selected",!0)})});var o=$("#font-preview-variants"),i=$("#font-preview-subsets");if(o.length&&i.length){o.add(i).find(".font-preview-row-bg").css("min-height","").css("min-height",Math.max(o.outerHeight(),i.outerHeight()))}},g=function(){var e=$(".custom-font-form-layout"),t=e.find("#font_url").val(),i=[];if(e.find('#font-family-names input[name="font_variants[]"]').each(function(e,t){var a=$(t).val().split(";");for(var n in a)i.push(a[n])}),!t||0==i.join("").trim().length||e.data("last-value")==t+i.join(";"))return!1;e.data("last-value",t+i.join(";")),o.html("");var s=$("<iframe></iframe>"),l=$('<p class="description">Loading font preview...</p>'),c=ajaxurl+"?action=typolab-preview-custom-font&font-url="+encodeURIComponent(t)+"&font-family="+encodeURIComponent(i.join(";"));return s.attr({src:c}).on("load",function(){var e=$(this.contentWindow.document);l.remove(),s.height(e.height()),n=setInterval(function(){s.height(e.height())},50),a&&$("html, body").animate({scrollTop:o.offset().top-50}),a=!0,h()}),r("font-preview-iframe","Live Preview",[l,s]),!0},y=function(){var e=$(".typekit-font-form-layout"),t=e.find("#kit_id").val();if(!t||e.data("kit-id")==t)return!1;e.data("kit-id",t),o.html("");var i=$("<iframe></iframe>"),s=$('<p class="description">Loading font preview...</p>'),l=ajaxurl+"?action=typolab-preview-typekit-font&kit-id="+encodeURIComponent(t);return i.attr({src:l}).on("load",function(){var e=$(this.contentWindow.document);if(s.remove(),i.height(e.height()),n=setInterval(function(){i.height(e.height())},50),a&&$("html, body").animate({scrollTop:o.offset().top-50}),a=!0,"undefined"!=this.contentWindow.kitInfo.kit){var r=this.contentWindow.kitInfo.kit,l=[];$.each(r.families,function(e,t){l.push('<a href="https://typekit.com/fonts/'+t.slug+'" title="Variations: '+t.variations.join(", ")+'" target="_blank">'+t.name+"</a>")}),i.after('<p class="font-details-link">Font Families: '+l.join(", ")+'<a href="https://typekit.com/kit_editor/kits/'+t+'" class="font-redownload" target="_blank" title="Kit Settings"><i class="fa fa-cog"></i></a></p>')}}),r("font-preview-iframe","Live Preview",[s,i]),!0};if(1==$("form#edit-font-form").length){var b=$(".font-selectors-list tbody"),w=b.find(".no-records").clone();b.sortable({helper:function(e,t){return t.children().each(function(){$(this).width($(this).width())}),t},handle:".sort-css-rule-row",axis:"y"});var k=$("#edit-font-form #save_font_changes");k.data("text",k.val());var C=$(".typekit-font-form-layout");C.length&&(C.on("blur","#kit_id",y),C.find("#typekit-font-generate-preview").on("click",function(e){e.preventDefault(),y()}),a=!1,y());var _=$(".custom-font-form-layout");if(_.length){var x=_.find(".font-family-entries"),S=$('<li><input type="text" name="font_variants[]" value="" required="required"><a href="#" class="remove"><i class="fa fa-remove"></i></a></li>');_.on("click","#add-custom-font-input",function(e){e.preventDefault(),x.append(S.clone()).find("li:last-child input").focus()}),x.on("click","a.remove",function(e){if(e.preventDefault(),$(this).prev().val().length>0&&!confirm("Are you sure you want to delete this font family name?"))return!1;$(this).parent().remove(),h()}),_.on("blur",'#font_url, #font-family-names input[name="font_variants[]"]',g).find("#custom-font-generate-preview").on("click",function(e){e.preventDefault(),g()}),a=!1,g()}var F=$("#typolab-toggle-advanced-options");F.on("click",function(e){e.preventDefault(),F.toggleClass("shown").html(F.hasClass("shown")?F.data("hide-options"):F.data("show-options"))}).html(F.hasClass("shown")?F.data("hide-options"):F.data("show-options"));var D=function(){k.removeClass("disabled").prop("disabled",!1).val(k.data("text"))},z=function(e){k.addClass("disabled").prop("disabled",!0),e&&k.val(e)},T=function(e){var t=b.find("tr"),a=t.length+1+(e||0);return t.filter("#css-selector-"+a).length?T(e?e+1:1):a},I=function(e,t){if("function"!=typeof e){var a=$("<tr></tr>"),n=$('<td class="font-drag"></td>'),o=$('<td class="font-selector"></td>'),i=$('<td class="font-variants"></td>'),s=$('<td class="font-sizes"></td>'),r=$('<td class="font-case"></td>'),l=$('<td class="font-selector-action"></td>');a.append(n).append(o).append(i).append(r).append(s).append(l),b.find(".no-records").remove();var c=T();a.attr("id","css-selector-"+c);var p=$("<input>").attr({type:"text",required:!0,placeholder:"CSS Selector Rule"+(1==c?" (i.e.: body, p, .myclass)":""),name:"font_selectors["+c+"][selector]",tabIndex:c,value:e&&e.selector?e.selector:""});p.appendTo(o);$('<a href="#" class="sort-css-rule-row"><i class="fa fa-bars"></i></a>').appendTo(n);var d=$("<select>").attr({name:"font_selectors["+c+"][variant]"});e&&e.variant&&d.data("selected",e.variant),d.append('<option value="" selected disabled>Loading...</option>').appendTo(i).on("change",function(e){$(this).data("selected",$(this).val())});var f=$("<select>").attr({className:"font-case",name:"font_selectors["+c+"][text-transform]",tabIndex:c,title:"Value for `fext-transform` property"}),u={"":"Default",uppercase:"Upper case",lowercase:"Lower case",capitalize:"Capitalize"};for(var v in u)$("<option>",{value:v}).text(u[v]).attr("selected",1==(e&&e["text-transform"]&&v==e["text-transform"])).appendTo(f);f.appendTo(r);var m=$("<input>").attr({type:"number",placeholder:"General",className:"font-size-general",step:"any",name:"font_selectors["+c+"][font-sizes][general]",tabIndex:c,value:e&&e.fontSizes&&e.fontSizes.general?e.fontSizes.general:""}),h=$("<input>").attr({type:"number",placeholder:"Desktop",className:"font-size-desktop",step:"any",name:"font_selectors["+c+"][font-sizes][desktop]",tabIndex:c,value:e&&e.fontSizes&&e.fontSizes.desktop?e.fontSizes.desktop:""}),g=$("<input>").attr({type:"number",placeholder:"Tablet",className:"font-size-tablet",step:"any",name:"font_selectors["+c+"][font-sizes][tablet]",tabIndex:c,value:e&&e.fontSizes&&e.fontSizes.tablet?e.fontSizes.tablet:""}),y=$("<input>").attr({type:"number",placeholder:"Mobile",className:"font-size-mobile",step:"any",name:"font_selectors["+c+"][font-sizes][mobile]",tabIndex:c,value:e&&e.fontSizes&&e.fontSizes.mobile?e.fontSizes.mobile:""});m.appendTo(s),h.appendTo(s),g.appendTo(s),y.appendTo(s);var k=$("<select>").attr({name:"font_selectors["+c+"][font-sizes][unit]"});k.append('<option value="px">px</option>'),k.append('<option value="em">em</option>'),k.append('<option value="rem">rem</option>'),k.append('<option value="%">%</option>'),e&&e.fontSizes&&e.fontSizes.unit&&k.find("option").each(function(t,a){e.fontSizes.unit==$(a).val()&&$(a).prop("selected",!0)}),k.appendTo(s);var C=$('<a href="#" class="remove-font-selector"><i class="fa fa-remove"></i></a>');C.on("click",function(e){e.preventDefault(),(0==p.val().trim().length||confirm("Confirm delete?"))&&(a.remove(),0==b.find("tr:not(.no-records)").length&&b.append(w))}),C.appendTo(l),b.append(a),t&&p.focus()}},j=$("script#font-selectors");if(j.length){var L=JSON.parse(j.html());for(var R in L)I(L[R])}var N=$(".predefined-css-selectors"),P=function(e){$(e.target).closest(N).length||N.removeClass("shown")};N.on("click",".button",function(t){t.preventDefault(),N.toggleClass("shown"),N.hasClass("shown")?$(e).on("click",P):$(e).off("click",P)}),N.on("click","ul li a",function(e){e.preventDefault();var t=$(this).data("selectors"),a=[];for(var n in t)a.push(t[n]);I({selector:a.join(", ")}),N.removeClass("shown"),h()}),h(),$("#add-new-selector").on("click",function(e){e.preventDefault(),I(null,!0),h()});var q=$(".font-conditional-loading tbody"),A=$("script#conditional-statements");if(A)var U=JSON.parse(A.html());var H=function(e){var t=$("<tr></tr>"),a=$("<td></td>").addClass("statement"),n=$("<td></td>").addClass("operator"),o=$("<td></td>").addClass("criteria"),i=$("<td></td>").addClass("actions");q.find(".no-statements").remove(),q.append('<tr><td colspan="4" class="or-label"><span>OR</span></td></tr>');var s=$("<select></select>").attr("name","statements[]"),r=[];r.push({value:"post_type",text:"Post Type",group:"General"}),r.push({value:"page_type",text:"Page Type",group:"General"}),r.push({value:"page_template",text:"Page Template",group:"General"}),$.each(U.data.post_types,function(e,t){r.push({value:e,text:t.singular,group:"Post Types"})}),$.each(U.data.taxonomies,function(e,t){r.push({value:e,text:t.singular,group:"Taxonomy :: "+U.data.post_types[t.post_type].name})});var l={};$.each(r,function(t,a){var n=$('<option value="'+a.value+'">'+a.text+"</option>");a.group?(l[a.group]||(l[a.group]=$("<optgroup></optgroup>").attr("label",a.group),l[a.group].appendTo(s)),l[a.group].append(n)):n.appendTo(s),e&&e.statement==a.value&&n.attr("selected",!0)}),s.on("change",function(e){O(s.val(),p)}),a.append(s);var c=$("<select></select>").attr({name:"operators[]"});c.append('<option value="==">is</option>'),c.append('<option value="!=">is not</option>'),n.append(c),e&&c.find('option[value="'+e.operator+'"]').prop("selected",!0);var p=$("<select></select>").attr({name:"criterions[]",class:"is-loading"});p.append('<option value="" class="loading-options">Loading options...</option>'),o.append(p),p.on("valuesSet",function(t,a){e&&a==e.statement&&$(this).find("option").each(function(t,a){$(a).val()==e.criteria&&$(a).prop("selected",!0)})});var d=$('<a href="#" class="remove-conditional-statement"><i class="fa fa-remove"></i></a>');d.on("click",function(e){e.preventDefault(),confirm("Confirm delete?")&&(t.prev().remove(),t.remove(),0==q.find("tr").length&&q.append('<tr class="no-statements"><td colspan="4">No defined conditional statements. Font will be loaded in all pages.</td></tr>'))}),d.appendTo(i),q.append(t.append(a).append(n).append(o).append(i)),s.trigger("change")},O=function(e,t){return t.addClass("is-loading").find("option").remove(),t.append('<option value="">Loading data...</option>'),"post_type"==e?(t.removeClass("is-loading").find("option").remove(),$.each(U.data.post_types,function(e,a){t.append($('<option value="'+e+'">'+a.singular+"</option>"))}),t.trigger("valuesSet",e)):"page_type"==e?(t.removeClass("is-loading").find("option").remove(),$.each(U.data.page_types,function(e,a){t.append($('<option value="'+e+'">'+a.name+"</option>"))}),t.trigger("valuesSet",e)):"page_template"==e?(t.removeClass("is-loading").find("option").remove(),$.each(U.data.page_template,function(e,a){t.append($('<option value="'+e+'">'+a.name+"</option>"))}),t.trigger("valuesSet",e)):U.data[e]?(t.removeClass("is-loading").find("option").remove(),$.each(U.data[e],function(e,a){t.append('<option value="'+a.value+'">'+a.text+"</option>")}),0==U.data[e].length&&t.addClass("is-loading").append('<option value="">:: No Entries Found ::</option>'),t.trigger("valuesSet",e)):U.data.post_types[e]?U.data[e]||$.post(ajaxurl,{action:"typolab_get_post_type_entries",post_type:e},function(a){a.success&&(U.data[e]=a.entries,O(e,t))},"json"):U.data.taxonomies[e]&&(U.data[e]||$.post(ajaxurl,{action:"typolab_get_taxonomy_entries",taxonomy:e},function(a){a.success&&(U.data[e]=a.entries,O(e,t))},"json")),t};$("#add-new-conditional-statement").on("click",function(e){e.preventDefault(),H()}),$.each(U.statements,function(e,t){H(t)});var E=$('select[name="font_status"]');if(E.length){var J=function(){E.closest(".grouped-input")["published"==E.val()?"addClass":"removeClass"]("green")};E.on("change",J),J()}}$(".font-sizes-container").length&&($(".font-sizes-container .show-responsive-options").on("click",function(e){e.preventDefault(),$(this).closest(".font-size-group").toggleClass("responsive-options-shown")}),$(".font-sizes-container .font-size-group").each(function(e,t){var a=$(t);a.find("table tbody .hidden input").filter(function(e,t){return $(t).val().length>0}).length&&a.addClass("responsive-options-shown"),a.find("table tbody .hidden select").filter(function(e,t){return $(t).val().length>0}).length&&a.addClass("responsive-options-shown")}),$(".add-font-selectors-table").on("click",".add-entry",function(e){e.preventDefault();var t=$(this).closest("tr").clone(),a=$('<a class="remove" title="Delete Selector" href="#"><i class="fa fa-remove"></i></a>');t.find("input").val(""),t.find(".add-remove *").remove(),t.find(".add-remove").append(a),$(this).closest("tbody").append(t),a.on("click",function(e){e.preventDefault(),confirm("Confirm delete of CSS selector")&&t.remove()}),t.find("input:first").focus()}),$("#new-font-sizes-group").on("click",function(e){e.preventDefault(),$(".add-new-font-size-group-container").slideToggle("normal",function(){$(this).find("input, textarea").first().focus()})}),$(".delete-custom-font-sizes-group").on("click",function(e){confirm("Are you sure you want to delete this font size group?")||e.preventDefault()}));var V=$("#typolab-advanced-settings");if(V.length){$(".typolab-toggle-advanced-font-settings").on("click",function(e){e.preventDefault(),V.slideToggle(300)});var W=V.find(".font-export-options"),G=V.find(".font-export-loading"),M=V.find(".font-export-code"),B=V.find("#typolab-export-settings");B.on("click",function(e){e.preventDefault();var t=W.find("#typolab_export_font_faces").is(":checked")?1:0,a=W.find("#typolab_export_font_sizes").is(":checked")?1:0,n=W.find("#typolab_export_font_settings").is(":checked")?1:0;if(W.hasClass("is-loading")||W.hasClass("done")||!(t||a||n))return!1;W.addClass("is-loading").hide(),G.fadeIn(),$.post(ajaxurl,{action:"typolab-export-import-manager",doExport:!0,fontFaces:t,fontSizes:a,fontSettings:n},function(e){if(W.removeClass("is-loading"),G.hide(),e.exported){var t=M.find("textarea");t.val(e.exported),M.fadeIn(100,function(){t.select(),W.addClass("done"),B.addClass("disabled")})}else alert("An error occured, export settings are not avaialble!")},"json")}),$("#typolab-import-button").on("click",function(e){$("#save_font_settings").click()})}$(".downloaded-fonts-list tbody .trash").on("click",function(e){if(!confirm("Are you sure you want to delete font files?\n\nThis won't delete fonts from the list, only font files."))return!1}),$(".typolab-fonts-list").on("click",".trash",function(e){if(!confirm("Are you sure you want to delete this font?"))return e.preventDefault(),!1});var K=$(".typolab-select-font-source");if(K.length){var Y=K.find("tbody tr"),Q=function(e){var t=$(".typolab-select-font-source").outerHeight();t-=$("#typolab_add_font").outerHeight(!0),$(".font-source-description").removeClass("selected").filter(".font-source-description-"+e).addClass("selected"),$(".typolab-selected-font-source").css({minHeight:t})};Y.on("click",function(e){var t=$(this).find('input[type="radio"]'),a=t.val();Y.removeClass("hover"),t.prop("checked",!0),$(this).addClass("hover"),Q(a)});var X=Y.find("input:checked");X.closest("tr").addClass("hover"),Q(X.val())}var Z=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}})}(jQuery,window);